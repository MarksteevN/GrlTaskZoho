@page "/projectlist/task/taskdetails"

<style>
    .center{
        text-align:center;
    }
    .divLeft{
        width: 50%;
        float:left;
        padding:10px;
    }
    .divRight{
        width: 50%;
        float:left;
        padding:10px;
    }
    
</style>
<table class="table table-bordered table-striped mb-0">
    <thead class="bg-warning">
        <tr>
            <th class="center" colspan = "2">Task Details  of @Taskname</th>            
        </tr>
    </thead>
    <tbody>
        <tr>
            <th> Task Name </th>
            <td> @Taskname </td>
        </tr>
        <tr>
            <th> Priority </th>
            <td> @Priority </td>
        </tr>
        <tr>
            <th> Status </th>
            <td> @Statuss </td>
        </tr>
        <tr>
            <th> Start Date </th>
            <td> @Startdate </td>
        </tr>
        <tr>
            <th> End Date </th>
            <td> @EndDtae </td>
        </tr>
    </tbody>
</table>

<br />
<div class="divLeft">
    <table class="table table-bordered table-striped mb-0">
                    <thead class="bg-warning">
                        <tr>
                            <th class="center">Owners Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Owner_name.Select((value, i) => new { i, value }))
                        {
                            var value = item.value;
                            var index = item.i;
                            @*var slno = index + 1;*@
                            <tr>
                                <td>@value</td>                
                            </tr>
                        }   
                    </tbody>
                </table>
</div>

<div class="divRight">
    <table class="table table-bordered table-striped mb-0">
                    <thead class="bg-warning">
                        <tr>
                            <th class="center">Follwers Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Followers_Name.Select((value, i) => new { i, value }))
                        {
                            var value = item.value;
                            var index = item.i;
                            @*var slno = index + 1;*@
                            <tr>
                                <td>@value</td>                
                            </tr>
                        }   
                    </tbody>
                </table>
</div>






@code {
    public List<string> Owner_name { get; set; }
    public List<string> Followers_Name { get; set; }
    public string Priority { get; set; }
    public string Statuss { get; set; }
    public string Startdate { get; set; }
    public string EndDtae { get; set; }
    public string Taskname { get; set; }
    protected override void OnInitialized()
    {
        RegenerateAcc_Token.RegenerateAccessToken(Linksforall.A_Token, EnumClass.METHOD.POST.ToString());
        Owner_name = new List<string>();
        Followers_Name = new List<string>();
        Task_Details();
    }
    public void Task_Details()
    {
        int indNo = 0;
        string filep = Directory.GetCurrentDirectory();
        System.IO.File.WriteAllText(filep + @"\Appdata\Selected_Task.txt", RegenerateAcc_Token.jstring);
        string FilePath = @"D:\Marksteev_GRL\Github Files\GRLZOHO\GRLZOHO\Appdata\Selected_Task.txt";
        var myJsonString = File.ReadAllText(FilePath);
        var myJsonObject = JsonConvert.DeserializeObject<TaskDetails>(myJsonString);
        Taskname = myJsonObject.tasks[indNo].name;
        Console.WriteLine("----------------------------------------");
        Console.WriteLine(Taskname);
        Console.WriteLine("----------------------------------------");

        for (var i = 0; i < myJsonObject.tasks[indNo].details.owners.Count; i++)
        {
            Owner_name.Add(myJsonObject.tasks[indNo].details.owners[i].name);
            Console.WriteLine("----------------------------------------");
            Console.WriteLine("Owner name" + Owner_name[i]);
            Console.WriteLine("----------------------------------------");
        }

        for (var i = 0; i < myJsonObject.tasks[indNo].task_followers.FOLLOWERS.Count; i++)
        {
            Followers_Name.Add(myJsonObject.tasks[indNo].task_followers.FOLLOWERS[i].FNAME);
            Console.WriteLine("----------------------------------------");
            Console.WriteLine("Followers name" + Followers_Name[i]);
            Console.WriteLine("----------------------------------------");
        }
        Priority = myJsonObject.tasks[indNo].priority;
        Console.WriteLine("----------------------------------------");
        Console.WriteLine("Priority" + Priority);
        Console.WriteLine("----------------------------------------");
        Statuss = myJsonObject.tasks[indNo].status.name;
        Console.WriteLine("----------------------------------------");
        Console.WriteLine("Status" + Statuss);
        Console.WriteLine("----------------------------------------");
        Startdate = myJsonObject.tasks[indNo].start_date;
        Console.WriteLine("----------------------------------------");
        Console.WriteLine("Start Date" + Startdate);
        Console.WriteLine("----------------------------------------");
        EndDtae = myJsonObject.tasks[indNo].end_date;
        Console.WriteLine("----------------------------------------");
        Console.WriteLine("End Date" + EndDtae);
        Console.WriteLine("----------------------------------------");
        Console.WriteLine("----------------------------------------");
        Console.WriteLine(RegenerateAcc_Token.jstring);
        Console.WriteLine("----------------------------------------");
    }


//    <table class="table table-bordered table-striped mb-0">
//    @*<thead class="bg-warning">
//        <tr>
//            <th colspan = "2" class="center">User Details</th>
//        </tr>
//    </thead>*@
//    <tbody>
//        <tr>
//            <td style="width= 50%">
//                <table class="table table-bordered table-striped mb-0">
//                    <thead class="bg-warning">
//                        <tr>
//                            <th class="center">Owners Name</th>
//                        </tr>
//                    </thead>
//                    <tbody>
//                        @foreach (var item in Owner_name.Select((value, i) => new { i, value }))
//                        {
//                            var value = item.value;
//                            var index = item.i;
//                            @*var slno = index + 1;*@
//                            <tr>
//                                <td>@value</td>                
//                            </tr>
//                        }   
//                    </tbody>
//                </table>
//            </td>
//            <td>
//                <table class="table table-bordered table-striped mb-0">
//                    <thead class="bg-warning">
//                        <tr>
//                            <th class="center">Follwers Name</th>
//                        </tr>
//                    </thead>
//                    <tbody>
//                        @foreach (var item in Followers_Name.Select((value, i) => new { i, value }))
//                        {
//                            var value = item.value;
//                            var index = item.i;
//                            @*var slno = index + 1;*@
//                            <tr>
//                                <td>@value</td>                
//                            </tr>
//                        }   
//                    </tbody>
//                </table>
//            </td>
//        </tr>
//    </tbody>
//</table>
}
